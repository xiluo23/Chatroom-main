# Chatroom-main
“整体架构采用了 Reactor 模式 ，基于 Linux Epoll 和 非阻塞 I/O 实现。
1. 接入层 ：由 Main Reactor 线程 负责监听 listenfd 和所有客户端连接的 I/O 事件。当有读事件发生时，Reactor 线程负责将数据读取到每个客户端独立的 用户态缓冲区 (User Buffer) 中。
2. 协议解析层 ：为了减轻 Reactor 负担，读取完数据后，会通过条件变量唤醒独立的 Parser 线程 。该线程负责处理 TCP 粘包和拆包 问题，解析出完整的业务请求。
3. 业务处理层 ：解析后的请求被封装成 Task，通过生产者-消费者模型放入 任务队列 ，由 固定大小的线程池 (Thread Pool) 抢占式处理，执行具体的数据库操作或逻辑运算。
4. 集群通信 ：系统集成了 Redis Pub/Sub 机制。用户登录时会订阅专属频道。当线程池处理消息时，会检查目标用户是否在本机；若不在，则通过 Redis 发布消息。Redis 监听线程收到消息后，会将其作为特殊任务再次投入线程池处理，实现了 跨服务器通信 。
5. 响应发送 ：处理结果被写入 响应队列 ，并通过 eventfd 唤醒 Reactor 线程，由 Reactor 线程在 I/O 线程中安全地将数据发送回客户端。”


在build目录中 cmake ..  make
可执行文件在bin目录
